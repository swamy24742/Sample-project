<div class="modal-header">
    <h2 class="modal-title cb-modal-title">{{title}}</h2>
    <button type="button" class="close cb-no-border" data-dismiss="modal" (click)="closeModal()">
        <span class="cb-modal-close" aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">

    <form [formGroup]="userForm">

        <div class="row">
            <div class="col">
                <div>
                    <label class="cb-required"> First Name </label>
                </div>
                <div class="input-group">
                    <!-- input box -->
                    <input class="" type="text" name="firstName" id="firstName" formControlName="firstName"
                        maxlength="50" />
                    <div
                        *ngIf="userForm.controls['firstName'].invalid && userForm.controls['firstName'].hasError && (userForm.controls['firstName'].dirty || userForm.controls['firstName'].touched)">
                        <!-- <span  class="cb-validation-err"  [readonly]="treatyConfig.isEditMode"
                            *ngIf="treatyForm.controls['riAgency'].hasError('minlength')">RIAgency should be 5 characters</span> -->
                        <span class="cb-validation-err"
                            *ngIf="userForm.controls['firstName'].hasError('required')">First Name required</span>
                    </div>
                </div>
            </div>
            <div class="col">
                <div>
                    <label class="cb-required"> Last Name </label>
                </div>

                <div class="input-group">
                    <!-- input box -->
                    <input class="" type="text" name="lastName" formControlName="lastName" maxlength="50" />
                    <div
                        *ngIf="userForm.controls['lastName'].invalid && userForm.controls['lastName'].hasError && (userForm.controls['lastName'].dirty || userForm.controls['lastName'].touched)">
                        <!-- <span  class="cb-validation-err"
                                *ngIf="treatyForm.controls['lastName'].hasError('minlength')">CededNo should be 4 characters.</span> -->
                        <span class="cb-validation-err" *ngIf="userForm.controls['lastName'].hasError('required')">Last
                            Name required</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <div>
                    <label class="cb-required"> Email Id </label>
                </div>
                <div class="input-group">
                    <!-- input box -->
                    <input class="" type="text" name="emailId" id="emailId" formControlName="emailId" maxlength="50" />
                    <div
                        *ngIf="userForm.controls['emailId'].invalid && userForm.controls['emailId'].hasError && (userForm.controls['emailId'].dirty || userForm.controls['emailId'].touched)">
                        <span class="cb-validation-err" *ngIf="userForm.controls['emailId'].hasError('email')">Invalid
                            Email Id</span>
                        <span class="cb-validation-err" *ngIf="userForm.controls['emailId'].hasError('required')">Email
                            Id is required</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <div>
                    <label class="cb-required">Manager Email Id </label>
                </div>
                <div class="input-group">
                    <!-- input box -->
                    <input class="" type="text" name="managerEmailId" id="managerEmailId"
                        formControlName="managerEmailId" maxlength="50" />
                    <div
                        *ngIf="userForm.controls['managerEmailId'].invalid && userForm.controls['managerEmailId'].hasError && (userForm.controls['managerEmailId'].dirty || userForm.controls['managerEmailId'].touched)">
                        <span class="cb-validation-err"
                            *ngIf="userForm.controls['managerEmailId'].hasError('email')">Invalid Email Id</span>
                        <span class="cb-validation-err"
                            *ngIf="userForm.controls['managerEmailId'].hasError('required')">Manager Email Id is
                            required</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col mt-3 col-lg-6">
                <div>
                    <label class="cb-required"> GITDIR ID </label>
                </div>
                <div class="input-group">
                    <!-- input box -->
                    <input class="" type="text" name="userId" id="userId" formControlName="userId"
                     maxlength="50" />

                    <div
                        *ngIf="userForm.controls['userId'].invalid && userForm.controls['userId'].hasError && (userForm.controls['userId'].dirty || userForm.controls['userId'].touched)">
                        <span class="cb-validation-err" *ngIf="userForm.controls['userId'].hasError('required')">GITDIR
                            ID is required</span>
                    </div>
                    <span class="cb-validation-err"
                        *ngIf="userConfig.isDuplicateError && (userForm.controls['userId'].value === userData.userId)">User
                        details already available for {{userData.userId}}. Please try a different one.</span>
                    <!-- <span *ngIf="!userForm.controls['userId'].valid && userForm.controls['userId']?.touched"
                            class="cb-validation-err">GITDIR ID Reqired</span> -->
                </div>
            </div>

            <div class="col mt-3 col-lg-6">
                <div>
                    <label class="cb-required"> System Role </label>
                </div>
                <div class="cb-input-group">
                    <select class="cb-select" name="userCategoryId" id="userCategoryId"
                        formControlName="userCategoryId">
                        <option *ngFor="let role of userCategories" [ngValue]="role.userCategoryId">
                            {{role.category}}
                        </option>
                    </select>
                    <!-- <span
                        *ngIf="!treatyForm.controls['sysytemRole'].valid && treatyForm.controls['sysytemRole']?.touched"
                        class="cb-validation-err">Agreement Type required</span> -->
                </div>
            </div>
        </div>

        <div class="mt-3 position-relative" *ngIf="userConfig.isEditMode">
            <div>
                <label>User Activation Status</label>
            </div>
            <label class="switch">
                <input type="checkbox" formControlName="isActive">
                <span class="slider round"></span>
            </label>
            <span class="cb-toggle-label" *ngIf="userForm.controls['isActive'].value"> Active </span>
            <span class="cb-toggle-label" *ngIf="!userForm.controls['isActive'].value"> In-Active </span>
        </div>
    </form>
</div>

<div class="modal-footer cb-modal-footer position-relative">
    <p *ngIf="userConfig.isEditMode" class="cb-reset-link" (click)="resetModal()">Reset to Default</p>
    <button type="button" class="btn cb-btn cb-btn-cancel cb-btn-light" data-dismiss="modal"
        (click)="closeModal()">Cancel</button>
    <button type="button"
        [disabled]="userForm.invalid || (userConfig.isDuplicateError && userForm.controls['userId'].value === userData.userId) || userForm.controls['userCategoryId'].value == 0"
        class="btn cb-btn cb-btn-save cb-btn-secondary ml-2" (click)="saveModal()">{{actionButtonTitle}}</button>
</div>